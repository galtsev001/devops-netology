# Домашнее задание к занятию "11.04 Микросервисы: масштабирование"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развертывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- Поддержка контейнеров;
- Обеспечивать обнаружение сервисов и маршрутизацию запросов;
- Обеспечивать возможность горизонтального масштабирования;
- Обеспечивать возможность автоматического масштабирования;
- Обеспечивать явное разделение ресурсов доступных извне и внутри системы;
- Обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т.п.

Обоснуйте свой выбор.
___
*Ответ*

Осмелюсь предположить что лучшим вариантом является использования `Kubernetes`(+ не зря он идет следующей серией уроков :-)
При изучении теории об этом инструменте, выяснилось что он может покрыть все указанные требования.
Учитывая тот факт, что `Kubernetes` имеет большое сообщество/хорошую документацию/большое практическое использования - **то это самый лучший вариант**.
Возможно стоит присмотреться к аналогам системы:
+ Yandex Cloud
+ Azure / Amazon & etc
___
## Задача 2: Распределенный кэш * (необязательная)

Разработчикам вашей компании понадобился распределенный кэш для организации хранения временной информации по сессиям пользователей.
Вам необходимо построить Redis Cluster состоящий из трех шард с тремя репликами.

### Схема:

![11-04-01](https://user-images.githubusercontent.com/1122523/114282923-9b16f900-9a4f-11eb-80aa-61ed09725760.png)

___
*Ответ*

Коллеги по цеху, подсказали хорошую статью для реализации подобного инструмента
[(Статья)](https://success.outsystems.com/Support/Enterprise_Customers/Installation/Configuring_OutSystems_with_Redis_in-memory_session_storage/Set_up_a_Redis_Cluster_for_Production_environments).

На каждом хосте запускается по 2 экземпляра redis один для master второй для slave, после этого однократно запускается комманда на инициализацию кластера. Пример команды:
    
```
    redis-cli --cluster create 172.31.6.35:7000 172.31.11.176:7000 172.31.3.184:7000 172.31.6.35:7001 172.31.11.176:7001 172.31.3.184:7001 --cluster-replicas 1
```
  
Из того что я понял, первые три узла будут с ролью master, вторая тройка узлов slave. Шардирование происходит автоматически.
___